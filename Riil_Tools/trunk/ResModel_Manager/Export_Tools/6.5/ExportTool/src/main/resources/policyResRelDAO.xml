<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.riil.resmodel.dao.impl.PolicyResRelDao">

	<resultMap id="PolicyResRelResultMap" type="com.riil.base.resmodel.pojo.policy.PolicyResRelPojo">
		<result property="id" column="C_ID" javaType="string" jdbcType="VARCHAR" />
		<result property="instId" column="C_INST_ID" javaType="string" jdbcType="VARCHAR" />
		<result property="isMain" column="C_IS_MAIN" javaType="byte" jdbcType="TINYINT" />
		<result property="policyId" column="C_POLICY_ID" javaType="string" jdbcType="VARCHAR" />
		<result property="subInstId" column="C_SUB_INST_ID" javaType="string" jdbcType="VARCHAR" />
		<result property="tag1" column="C_TAG1" javaType="string" jdbcType="VARCHAR" />
	</resultMap>
	<select id="select_by_all" resultMap="PolicyResRelResultMap">
		SELECT C_INST_ID, C_IS_MAIN, C_POLICY_ID,
		C_SUB_INST_ID, C_TAG1
		FROM t_moni_policy_res_rel
    </select>
	<!-- Select POJO object by ID, 虚资源C_IS_MAIN为-2 -->
	<select id="select_by_policyId" parameterType="string" resultMap="PolicyResRelResultMap">
		SELECT C_INST_ID, C_IS_MAIN, C_POLICY_ID,
		C_SUB_INST_ID, C_TAG1
		FROM t_moni_policy_res_rel
		WHERE C_POLICY_ID = #{policyId ,jdbcType=VARCHAR} 
		AND C_IS_MAIN > -2
    </select>
</mapper>
