<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.riil.base.policy.impl.dao.PolicyActionDAO">

	<resultMap id="PolicyActionResultMap" type="com.riil.base.resmodel.pojo.policy.PolicyActionPojo">
		<result property="args" column="C_ARGS" javaType="string" jdbcType="VARCHAR" />
		<result property="desc" column="C_DESC" javaType="string" jdbcType="VARCHAR" />
		<result property="eventIds" column="C_EVENT_IDS" javaType="string" jdbcType="VARCHAR" />
		<result property="file" column="C_FILE" javaType="string" jdbcType="VARCHAR" />
		<result property="id" column="C_ID" javaType="string" jdbcType="VARCHAR" />
		<result property="inUse" column="C_IN_USE" javaType="byte" jdbcType="TINYINT" />
		<result property="pluginId" column="C_PLUGIN_ID" javaType="string" jdbcType="VARCHAR" />
		<result property="policyId" column="C_POLICY_ID" javaType="string" jdbcType="VARCHAR" />
		<result property="tag1" column="C_TAG1" javaType="string" jdbcType="VARCHAR" />
		<result property="tag2" column="C_TAG2" javaType="string" jdbcType="VARCHAR" />
		<result property="actionName" column="C_ACTION_NAME" javaType="string" jdbcType="VARCHAR" />
	</resultMap>
	<sql id="Query_Where_Conditon">
		<trim prefix="WHERE" prefixOverrides="AND |OR ">
			<if test="policyId != null and policyId !=''">
				AND C_POLICY_ID = #{policyId ,jdbcType=VARCHAR}
	        </if>
			<if test="actionName != null and actionName !=''">
				AND C_ACTION_NAME = #{actionName ,jdbcType=VARCHAR}
	        </if>
			<if test="id != null and id !=''">
				AND C_ID != #{id ,jdbcType=VARCHAR}
	        </if>
		</trim>
	</sql>
	<!-- Insert POJO object -->
	<insert id="insert" parameterType="com.riil.base.resmodel.pojo.policy.PolicyActionPojo">
		INSERT INTO
		t_moni_policy_action ( C_ARGS, C_COMPANY_ID, C_DESC, C_EVENT_IDS,
		C_FILE, C_ID, C_IN_USE, C_PLUGIN_ID, C_POLICY_ID, C_TAG1,
		C_TAG2,C_ACTION_NAME )
		VALUES(
		#{args ,jdbcType=VARCHAR}, #{companyId ,jdbcType=VARCHAR}, #{desc ,jdbcType=VARCHAR},
		#{eventIds ,jdbcType=VARCHAR}, #{file ,jdbcType=VARCHAR}, #{id ,jdbcType=VARCHAR}, #{inUse ,jdbcType=TINYINT}, #{pluginId ,jdbcType=VARCHAR}, #{policyId ,jdbcType=VARCHAR},
		#{tag1 ,jdbcType=VARCHAR}, #{tag2 ,jdbcType=VARCHAR},#{actionName ,jdbcType=VARCHAR} )
    </insert>

	<!-- Update POJO object by ID -->
	<update id="update_by_id" parameterType="com.riil.base.resmodel.pojo.policy.PolicyActionPojo">
		UPDATE
		t_moni_policy_action
		SET
		C_DESC = #{desc ,jdbcType=VARCHAR},
		C_EVENT_IDS = #{eventIds ,jdbcType=VARCHAR},
		C_FILE = #{file ,jdbcType=VARCHAR},
		C_PLUGIN_ID =
		#{pluginId ,jdbcType=VARCHAR},
		C_ACTION_NAME = #{actionName ,jdbcType=VARCHAR}
		WHERE C_ID = #{id ,jdbcType=VARCHAR}
    </update>


	<!-- Update POJO object by ID -->
	<update id="update_state_by_ids" parameterType="java.util.Map">
		UPDATE t_moni_policy_action
		SET C_IN_USE = #{inUse ,jdbcType=TINYINT} WHERE C_ID in
		<foreach item="ids" index="index" collection="ids" open="(" separator="," close=")">
			#{ids}
        </foreach>
	</update>

	<!-- Update POJO object by Name -->
	<update id="update_state_by_names" parameterType="java.util.Map">
		UPDATE t_moni_policy_action
		SET C_IN_USE = #{inUse ,jdbcType=TINYINT} WHERE C_POLICY_ID =
		#{policyId ,jdbcType=VARCHAR} AND C_ACTION_NAME in
		<foreach item="actionName" index="index" collection="actionNames" open="(" separator="," close=")">
			#{actionName ,jdbcType=VARCHAR}
		</foreach>
	</update>

	<!-- Delete POJO object by ID -->
	<delete id="delete_by_id" parameterType="string">
		DELETE FROM
		t_moni_policy_action WHERE C_ID in (#{id ,jdbcType=VARCHAR})
    </delete>

	<!-- Delete POJO object by ID -->
	<delete id="delete_by_action_name" parameterType="map">
		DELETE FROM
		t_moni_policy_action WHERE C_POLICY_ID = #{policyId ,jdbcType=VARCHAR}
		AND C_ACTION_NAME
		= #{actionName ,jdbcType=VARCHAR}
    </delete>

	<delete id="delete_by_action_names" parameterType="map">
		DELETE FROM t_moni_policy_action WHERE C_POLICY_ID = #{policyId ,jdbcType=VARCHAR} AND
		C_ACTION_NAME IN
		<foreach item="actionName" index="index" collection="actionNames" open="(" separator="," close=")">
			#{actionName ,jdbcType=VARCHAR}
		</foreach>
	</delete>


	<delete id="batch_delete_by_ids" parameterType="java.util.List">
		DELETE FROM t_moni_policy_action WHERE C_ID in
		<foreach item="item" index="index" collection="list" open="(" separator="," close=")">
			#{item}
        </foreach>
	</delete>
	<delete id="delete_by_policy_id" parameterType="string">
		DELETE FROM
		t_moni_policy_action WHERE C_POLICY_ID in (#{id ,jdbcType=VARCHAR})
	</delete>


	<delete id="batch_delete_by_policy_ids" parameterType="java.util.List">
		DELETE FROM t_moni_policy_action WHERE C_POLICY_ID in
		<foreach item="item" index="index" collection="list" open="(" separator="," close=")">
			#{item}
        </foreach>
	</delete>
	<!-- Delete all POJO object -->
	<delete id="delete_all">
		DELETE FROM t_moni_policy_action
    </delete>


	<!-- Select POJO object by ID -->
	<select id="select_by_id" parameterType="string" resultMap="PolicyActionResultMap">
		SELECT C_ARGS, C_COMPANY_ID, C_DESC, C_EVENT_IDS,
		C_FILE, C_ID,
		C_IN_USE, C_PLUGIN_ID, C_POLICY_ID, C_TAG1, C_TAG2,C_ACTION_NAME
		FROM
		t_moni_policy_action
		WHERE C_ID =
		#{id ,jdbcType=VARCHAR}
    </select>
	<select id="select_by_name" parameterType="com.riil.base.resmodel.pojo.policy.PolicyActionPojo" resultType="int">
		select
		count(0)
		from t_moni_policy_action
		<include refid="Query_Where_Conditon" />
	</select>

	<!-- Select POJO object by ID -->
	<select id="select_by_policyId" parameterType="string" resultMap="PolicyActionResultMap">
		SELECT C_ARGS, C_COMPANY_ID, C_DESC,
		C_EVENT_IDS, C_FILE,
		C_ID, C_IN_USE, C_PLUGIN_ID, C_POLICY_ID, C_TAG1, C_TAG2,C_ACTION_NAME
		FROM
		t_moni_policy_action
		WHERE C_POLICY_ID = #{policyId ,jdbcType=VARCHAR}
    </select>
	<!-- Update POJO object policyId by oriPolicyId -->
	<update id="update_newPolicyId_by_oriPolicyId" parameterType="java.util.Map">
		UPDATE t_moni_policy_action
		SET C_POLICY_ID =	#{oriPolicyId}
		WHERE C_POLICY_ID = #{newPolicyId}
    </update>

</mapper>
